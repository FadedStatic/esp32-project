#include <Arduino.h>

#include <cstdint>
#include <array>
#include <map>
#include <vector>
#pragma pack(push, 1)  // Save previous alignment and set byte alignment

enum pin_resolving : std::uint8_t {
  START = 36, // these two pins are designated input-only
  GUITAR = 39, // not a waste
  POTENTIOMETER = 35,
  RED_1 = 25,
  GREEN_1 = 33,
  BLUE_1 = 32,
  BLUE_2 = 14,
  GREEN_2 = 27,
  RED_2 = 26,
  BLUE_3 = 16,
  GREEN_3 = 12,
  RED_3 = 13,
  BLUE_4 = 17,
  GREEN_4 = 4,
  RED_4 = 23,
  RED_AUX_1 = 18,
  RED_AUX_2 = 21,
  YELLOW_AUX = 19,
  PIN_ALL_RGB = 0x90, // not a real pin, more like an optimization here.
};

const std::array<std::pair<std::uint8_t, std::uint32_t>, 18> pin_init = {{
  { START,  INPUT },
  { GUITAR, INPUT },
  { GREEN_1, OUTPUT},
  { RED_1, OUTPUT},
  { BLUE_1, OUTPUT},
  { GREEN_2, OUTPUT},
  { RED_2, OUTPUT},
  { BLUE_2, OUTPUT},
  { GREEN_3, OUTPUT},
  { RED_3, OUTPUT},
  { BLUE_3, OUTPUT},
  { GREEN_4, OUTPUT},
  { RED_4, OUTPUT},
  { BLUE_4, OUTPUT},
  { RED_AUX_1, OUTPUT},
  { RED_AUX_2, OUTPUT},
  { YELLOW_AUX, OUTPUT},
  { POTENTIOMETER, INPUT}
}};

constexpr std::uint8_t resolution = 4; // changes n times over timespan

struct pulse_event {
  std::uint32_t time;
  std::uint16_t duration;
  std::uint8_t pin;
  std::uint8_t int_res;
  constexpr pulse_event(std::uint32_t t, std::uint16_t d, std::uint8_t p)
    : time(t), duration(d), pin(p), int_res(resolution) {}
  constexpr pulse_event(std::uint32_t t, std::uint16_t d, std::uint8_t p, std::uint8_t res)
    : time(t), duration(d), pin(p), int_res(res) {}
};

struct rgb_event {
  std::uint32_t time;
  std::uint16_t duration;
  std::uint8_t red, green, blue;

  constexpr rgb_event(std::uint32_t t, std::uint16_t d, std::uint8_t r, std::uint8_t g, std::uint8_t b)
    : time(t), duration(d), red(r), green(g), blue(b) {}
};

struct event_init {
  union {
    pulse_event pulse;
    rgb_event rgb;
  } v;

  std::uint8_t type;

  constexpr event_init(const pulse_event& pulse_) : v{.pulse = pulse_}, type(0) {}
  constexpr event_init(const rgb_event& rgb_) : v{.rgb = rgb_}, type(1) {}
};

struct phys_event {
  std::uint16_t delay;
  std::uint32_t data;
};

// crazy optimization, it used to be a LOT of containers but I had the idea to flatten it.
std::vector<phys_event> queue;

constexpr std::array<event_init,937> event_inits = {
event_init{pulse_event{0, 130, RED_AUX_2}},
{pulse_event{130, 130, RED_AUX_1}},
{pulse_event{260, 130, RED_AUX_2}},
{pulse_event{390, 130, RED_AUX_1}},
{pulse_event{520, 130, RED_AUX_2}},
{pulse_event{650, 130, RED_AUX_1}},
{pulse_event{780, 130, RED_AUX_2}},
{pulse_event{910, 130, RED_AUX_1}},
{pulse_event{1040, 130, RED_AUX_2}},
{pulse_event{1170, 130, RED_AUX_1}},
{pulse_event{1300, 130, RED_AUX_2}},
{pulse_event{1430, 130, RED_AUX_1}},
{pulse_event{1560, 130, RED_AUX_2}},
{pulse_event{1690, 130, RED_AUX_1}},
{pulse_event{1820, 130, RED_AUX_2}},
{pulse_event{1950, 130, RED_AUX_1}},
{pulse_event{2080, 130, RED_AUX_2}},
{pulse_event{2210, 130, RED_AUX_1}},
{pulse_event{2340, 130, RED_AUX_2}},
{pulse_event{2470, 130, RED_AUX_1}},
{pulse_event{2600, 130, RED_AUX_2}},
{pulse_event{2730, 130, RED_AUX_1}},
{pulse_event{2860, 130, RED_AUX_2}},
{pulse_event{2990, 130, RED_AUX_1}},
{pulse_event{3120, 130, RED_AUX_2}},
{pulse_event{3250, 130, RED_AUX_1}},
{pulse_event{3380, 130, RED_AUX_2}},
{pulse_event{3510, 130, RED_AUX_1}},
{pulse_event{3640, 130, RED_AUX_2}},
{pulse_event{3770, 130, RED_AUX_1}},
{pulse_event{3900, 130, RED_AUX_2}},
{pulse_event{4030, 130, RED_AUX_1}},
{pulse_event{4160, 130, RED_AUX_2}},
{pulse_event{4290, 130, RED_AUX_1}},
{pulse_event{4420, 130, RED_AUX_2}},
{pulse_event{4550, 130, RED_AUX_1}},
{pulse_event{4680, 130, RED_AUX_2}},
{pulse_event{4810, 130, RED_AUX_1}},
{pulse_event{4940, 130, RED_AUX_2}},
{pulse_event{5070, 130, RED_AUX_1}},
{pulse_event{5200, 130, RED_AUX_2}},
{pulse_event{5330, 130, RED_AUX_1}},
{pulse_event{5460, 130, RED_AUX_2}},
{pulse_event{5590, 130, RED_AUX_1}},
{pulse_event{5720, 130, RED_AUX_2}},
{pulse_event{5850, 130, RED_AUX_1}},
{pulse_event{5980, 130, RED_AUX_2}},
{pulse_event{6110, 130, RED_AUX_1}},
{pulse_event{6240, 130, RED_AUX_2}},
{pulse_event{6370, 130, RED_AUX_1}},
{pulse_event{6500, 130, RED_AUX_2}},
{pulse_event{6630, 130, RED_AUX_1}},
{pulse_event{6760, 130, RED_AUX_2}},
{pulse_event{6890, 130, RED_AUX_1}},
{pulse_event{7020, 130, RED_AUX_2}},
{pulse_event{7150, 130, RED_AUX_1}},
{pulse_event{7280, 130, RED_AUX_2}},
{pulse_event{7410, 130, RED_AUX_1}},
{pulse_event{7540, 130, RED_AUX_2}},
{pulse_event{7670, 130, RED_AUX_1}},
{pulse_event{7800, 130, RED_AUX_2}},
{pulse_event{7930, 130, RED_AUX_1}},
{pulse_event{8060, 130, RED_AUX_2}},
{pulse_event{8190, 130, RED_AUX_1}},
{pulse_event{8320, 130, RED_AUX_2}},
{pulse_event{8450, 130, RED_AUX_1}},
{pulse_event{8580, 130, RED_AUX_2}},
{pulse_event{8710, 130, RED_AUX_1}},
{pulse_event{8840, 130, RED_AUX_2}},
{pulse_event{8970, 130, RED_AUX_1}},
{pulse_event{9100, 130, RED_AUX_2}},
{pulse_event{9230, 130, RED_AUX_1}},
{pulse_event{9360, 130, RED_AUX_2}},
{pulse_event{9490, 130, RED_AUX_1}},
{pulse_event{9620, 130, RED_AUX_2}},
{pulse_event{9750, 130, RED_AUX_1}},
{pulse_event{9880, 130, RED_AUX_2}},
{pulse_event{10010, 130, RED_AUX_1}},
{pulse_event{10140, 130, RED_AUX_2}},
{pulse_event{10270, 130, RED_AUX_1}},
{pulse_event{10400, 130, RED_AUX_2}},
{pulse_event{10530, 130, RED_AUX_1}},
{pulse_event{10660, 130, RED_AUX_2}},
{pulse_event{10790, 130, RED_AUX_1}},
{pulse_event{10920, 130, RED_AUX_2}},
{pulse_event{11050, 130, RED_AUX_1}},
{pulse_event{11180, 130, RED_AUX_2}},
{pulse_event{11310, 130, RED_AUX_1}},
{pulse_event{11440, 130, RED_AUX_2}},
{pulse_event{11570, 130, RED_AUX_1}},
{pulse_event{11700, 130, RED_AUX_2}},
{pulse_event{11830, 130, RED_AUX_1}},
{pulse_event{11960, 130, RED_AUX_2}},
{pulse_event{12090, 130, RED_AUX_1}},
{pulse_event{12220, 130, RED_AUX_2}},
{pulse_event{12350, 130, RED_AUX_1}},
{pulse_event{12480, 130, RED_AUX_2}},
{pulse_event{12610, 130, RED_AUX_1}},
{pulse_event{12740, 130, RED_AUX_2}},
{pulse_event{12870, 130, RED_AUX_1}},
{pulse_event{13000, 130, RED_AUX_2}},
{pulse_event{13130, 130, RED_AUX_1}},
{pulse_event{13260, 130, RED_AUX_2}},
{pulse_event{13390, 130, RED_AUX_1}},
{pulse_event{13520, 130, RED_AUX_2}},
{pulse_event{13650, 130, RED_AUX_1}},
{pulse_event{13780, 130, RED_AUX_2}},
{pulse_event{13910, 130, RED_AUX_1}},
{pulse_event{14040, 130, RED_AUX_2}},
{pulse_event{14170, 130, RED_AUX_1}},
{pulse_event{14300, 130, RED_AUX_2}},
{pulse_event{14430, 130, RED_AUX_1}},
{pulse_event{14560, 130, RED_AUX_2}},
{pulse_event{14690, 130, RED_AUX_1}},
{pulse_event{14820, 130, RED_AUX_2}},
{pulse_event{14950, 130, RED_AUX_1}},
{pulse_event{15080, 130, RED_AUX_2}},
{pulse_event{15210, 130, RED_AUX_1}},
{pulse_event{15340, 130, RED_AUX_2}},
{pulse_event{15470, 130, RED_AUX_1}},
{pulse_event{15600, 130, RED_AUX_2}},
{pulse_event{15730, 130, RED_AUX_1}},
{pulse_event{15860, 130, RED_AUX_2}},
{pulse_event{15990, 130, RED_AUX_1}},
{pulse_event{16120, 130, RED_AUX_2}},
{pulse_event{16250, 130, RED_AUX_1}},
{pulse_event{16380, 130, RED_AUX_2}},
{pulse_event{16510, 130, RED_AUX_1}},
{pulse_event{16640, 130, RED_AUX_2}},
{pulse_event{16770, 130, RED_AUX_1}},
{pulse_event{16900, 130, RED_AUX_2}},
{pulse_event{17030, 130, RED_AUX_1}},
{pulse_event{17160, 130, RED_AUX_2}},
{pulse_event{17290, 130, RED_AUX_1}},
{pulse_event{17420, 130, RED_AUX_2}},
{pulse_event{17550, 130, RED_AUX_1}},
{pulse_event{17680, 130, RED_AUX_2}},
{pulse_event{17810, 130, RED_AUX_1}},
{pulse_event{17940, 130, RED_AUX_2}},
{pulse_event{18070, 130, RED_AUX_1}},
{pulse_event{18200, 130, RED_AUX_2}},
{pulse_event{18330, 130, RED_AUX_1}},
{pulse_event{18460, 130, RED_AUX_2}},
{pulse_event{18590, 130, RED_AUX_1}},
{pulse_event{18720, 130, RED_AUX_2}},
{pulse_event{18850, 130, RED_AUX_1}},
{pulse_event{18980, 130, RED_AUX_2}},
{pulse_event{19110, 130, RED_AUX_1}},
{pulse_event{19240, 130, RED_AUX_2}},
{pulse_event{19370, 130, RED_AUX_1}},
{pulse_event{19500, 130, RED_AUX_2}},
{pulse_event{19630, 130, RED_AUX_1}},
{pulse_event{19760, 130, RED_AUX_2}},
{pulse_event{19890, 130, RED_AUX_1}},
{pulse_event{20020, 130, RED_AUX_2}},
{pulse_event{20150, 130, RED_AUX_1}},
{pulse_event{20280, 130, RED_AUX_2}},
{pulse_event{20410, 130, RED_AUX_1}},
{pulse_event{20540, 130, RED_AUX_2}},
{pulse_event{20670, 130, RED_AUX_1}},
{pulse_event{20800, 130, RED_AUX_2}},
{pulse_event{20930, 130, RED_AUX_1}},
{pulse_event{21060, 130, RED_AUX_2}},
{pulse_event{21190, 130, RED_AUX_1}},
{pulse_event{21320, 130, RED_AUX_2}},
{pulse_event{21450, 130, RED_AUX_1}},
{pulse_event{21580, 130, RED_AUX_2}},
{pulse_event{21710, 130, RED_AUX_1}},
{pulse_event{21840, 130, RED_AUX_2}},
{pulse_event{21970, 130, RED_AUX_1}},
{pulse_event{22100, 130, RED_AUX_2}},
{pulse_event{22230, 130, RED_AUX_1}},
{pulse_event{22360, 130, RED_AUX_2}},
{pulse_event{22490, 130, RED_AUX_1}},
{pulse_event{22620, 130, RED_AUX_2}},
{pulse_event{22750, 130, RED_AUX_1}},
{pulse_event{22880, 130, RED_AUX_2}},
{pulse_event{23010, 130, RED_AUX_1}},
{pulse_event{23140, 130, RED_AUX_2}},
{pulse_event{23270, 130, RED_AUX_1}},
{pulse_event{23400, 130, RED_AUX_2}},
{pulse_event{23530, 130, RED_AUX_1}},
{pulse_event{23660, 130, RED_AUX_2}},
{pulse_event{23790, 130, RED_AUX_1}},
{pulse_event{23920, 130, RED_AUX_2}},
{pulse_event{24050, 130, RED_AUX_1}},
{pulse_event{24180, 130, RED_AUX_2}},
{pulse_event{24310, 130, RED_AUX_1}},
{pulse_event{24440, 130, RED_AUX_2}},
{pulse_event{24570, 130, RED_AUX_1}},
{pulse_event{24700, 130, RED_AUX_2}},
{pulse_event{24830, 130, RED_AUX_1}},
{pulse_event{24960, 130, RED_AUX_2}},
{pulse_event{25090, 130, RED_AUX_1}},
{pulse_event{25220, 130, RED_AUX_2}},
{pulse_event{25350, 130, RED_AUX_1}},
{pulse_event{25480, 130, RED_AUX_2}},
{pulse_event{25610, 130, RED_AUX_1}},
{pulse_event{25740, 130, RED_AUX_2}},
{pulse_event{25870, 130, RED_AUX_1}},
{pulse_event{26000, 130, RED_AUX_2}},
{pulse_event{26130, 130, RED_AUX_1}},
{pulse_event{26260, 130, RED_AUX_2}},
{pulse_event{26390, 130, RED_AUX_1}},
{pulse_event{26520, 130, RED_AUX_2}},
{pulse_event{26650, 130, RED_AUX_1}},
{pulse_event{26780, 130, RED_AUX_2}},
{pulse_event{26910, 130, RED_AUX_1}},
{pulse_event{27040, 130, RED_AUX_2}},
{pulse_event{27170, 130, RED_AUX_1}},
{pulse_event{27300, 130, RED_AUX_2}},
{pulse_event{27430, 130, RED_AUX_1}},
{pulse_event{27560, 130, RED_AUX_2}},
{pulse_event{27690, 130, RED_AUX_1}},
{pulse_event{27820, 130, RED_AUX_2}},
{pulse_event{27950, 130, RED_AUX_1}},
{pulse_event{28080, 130, RED_AUX_2}},
{pulse_event{28210, 130, RED_AUX_1}},
{pulse_event{28340, 130, RED_AUX_2}},
{pulse_event{28470, 130, RED_AUX_1}},
{pulse_event{28600, 130, RED_AUX_2}},
{pulse_event{28730, 130, RED_AUX_1}},
{pulse_event{28860, 130, RED_AUX_2}},
{pulse_event{28990, 130, RED_AUX_1}},
{pulse_event{29120, 130, RED_AUX_2}},
{pulse_event{29250, 130, RED_AUX_1}},
{pulse_event{29380, 130, RED_AUX_2}},
{pulse_event{29510, 130, RED_AUX_1}},
{pulse_event{29640, 130, RED_AUX_2}},
{pulse_event{29770, 130, RED_AUX_1}},
{pulse_event{29900, 130, RED_AUX_2}},
{pulse_event{30030, 130, RED_AUX_1}},
{pulse_event{30160, 130, RED_AUX_2}},
{pulse_event{30290, 130, RED_AUX_1}},
{pulse_event{30420, 130, RED_AUX_2}},
{pulse_event{30550, 130, RED_AUX_1}},
{pulse_event{30680, 130, RED_AUX_2}},
{pulse_event{30810, 130, RED_AUX_1}},
{pulse_event{30940, 130, RED_AUX_2}},
{pulse_event{31070, 130, RED_AUX_1}},
{pulse_event{31200, 130, RED_AUX_2}},
{pulse_event{31330, 130, RED_AUX_1}},
{pulse_event{31460, 130, RED_AUX_2}},
{pulse_event{31590, 130, RED_AUX_1}},
{pulse_event{31720, 130, RED_AUX_2}},
{pulse_event{31850, 130, RED_AUX_1}},
{pulse_event{31980, 130, RED_AUX_2}},
{pulse_event{32110, 130, RED_AUX_1}},
{pulse_event{32240, 130, RED_AUX_2}},
{pulse_event{32370, 130, RED_AUX_1}},
{pulse_event{32500, 130, RED_AUX_2}},
{pulse_event{32630, 130, RED_AUX_1}},
{pulse_event{32760, 130, RED_AUX_2}},
{pulse_event{32890, 130, RED_AUX_1}},
{pulse_event{33020, 130, RED_AUX_2}},
{pulse_event{33150, 130, RED_AUX_1}},
{pulse_event{33280, 130, RED_AUX_2}},
{pulse_event{33410, 130, RED_AUX_1}},
{pulse_event{33540, 130, RED_AUX_2}},
{pulse_event{33670, 130, RED_AUX_1}},
{pulse_event{33800, 130, RED_AUX_2}},
{pulse_event{33930, 130, RED_AUX_1}},
{pulse_event{34060, 130, RED_AUX_2}},
{pulse_event{34190, 130, RED_AUX_1}},
{pulse_event{34320, 130, RED_AUX_2}},
{pulse_event{34450, 130, RED_AUX_1}},
{pulse_event{34580, 130, RED_AUX_2}},
{pulse_event{34710, 130, RED_AUX_1}},
{pulse_event{34840, 130, RED_AUX_2}},
{pulse_event{34970, 130, RED_AUX_1}},
{pulse_event{35100, 130, RED_AUX_2}},
{pulse_event{35230, 130, RED_AUX_1}},
{pulse_event{35360, 130, RED_AUX_2}},
{pulse_event{35490, 130, RED_AUX_1}},
{pulse_event{35620, 130, RED_AUX_2}},
{pulse_event{35750, 130, RED_AUX_1}},
{pulse_event{35880, 130, RED_AUX_2}},
{pulse_event{36010, 130, RED_AUX_1}},
{pulse_event{36140, 130, RED_AUX_2}},
{pulse_event{36270, 130, RED_AUX_1}},
{pulse_event{36400, 130, RED_AUX_2}},
{pulse_event{36530, 130, RED_AUX_1}},
{pulse_event{36660, 130, RED_AUX_2}},
{pulse_event{36790, 130, RED_AUX_1}},
{pulse_event{36920, 130, RED_AUX_2}},
{pulse_event{37050, 130, RED_AUX_1}},
{pulse_event{37180, 130, RED_AUX_2}},
{pulse_event{37310, 130, RED_AUX_1}},
{pulse_event{37440, 130, RED_AUX_2}},
{pulse_event{37570, 130, RED_AUX_1}},
{pulse_event{37700, 130, RED_AUX_2}},
{pulse_event{37830, 130, RED_AUX_1}},
{pulse_event{37960, 130, RED_AUX_2}},
{pulse_event{38090, 130, RED_AUX_1}},
{pulse_event{38220, 130, RED_AUX_2}},
{pulse_event{38350, 130, RED_AUX_1}},
{pulse_event{38480, 130, RED_AUX_2}},
{pulse_event{38610, 130, RED_AUX_1}},
{pulse_event{38740, 130, RED_AUX_2}},
{pulse_event{38870, 130, RED_AUX_1}},
{pulse_event{39000, 130, RED_AUX_2}},
{pulse_event{39130, 130, RED_AUX_1}},
{pulse_event{39260, 130, RED_AUX_2}},
{pulse_event{39390, 130, RED_AUX_1}},
{pulse_event{39520, 130, RED_AUX_2}},
{pulse_event{39650, 130, RED_AUX_1}},
{pulse_event{39780, 130, RED_AUX_2}},
{pulse_event{39910, 130, RED_AUX_1}},
{pulse_event{40040, 130, RED_AUX_2}},
{pulse_event{40170, 130, RED_AUX_1}},
{pulse_event{40300, 130, RED_AUX_2}},
{pulse_event{40430, 130, RED_AUX_1}},
{pulse_event{40560, 130, RED_AUX_2}},
{pulse_event{40690, 130, RED_AUX_1}},
{pulse_event{40820, 130, RED_AUX_2}},
{pulse_event{40950, 130, RED_AUX_1}},
{pulse_event{41080, 130, RED_AUX_2}},
{pulse_event{41210, 130, RED_AUX_1}},
{pulse_event{41340, 130, RED_AUX_2}},
{pulse_event{41470, 130, RED_AUX_1}},
{pulse_event{41600, 130, RED_AUX_2}},
{pulse_event{41730, 130, RED_AUX_1}},
{pulse_event{41860, 130, RED_AUX_2}},
{pulse_event{41990, 130, RED_AUX_1}},
{pulse_event{42120, 130, RED_AUX_2}},
{pulse_event{42250, 130, RED_AUX_1}},
{pulse_event{42380, 130, RED_AUX_2}},
{pulse_event{42510, 130, RED_AUX_1}},
{pulse_event{42640, 130, RED_AUX_2}},
{pulse_event{42770, 130, RED_AUX_1}},
{pulse_event{42900, 130, RED_AUX_2}},
{pulse_event{43030, 130, RED_AUX_1}},
{pulse_event{43160, 130, RED_AUX_2}},
{pulse_event{43290, 130, RED_AUX_1}},
{pulse_event{43420, 130, RED_AUX_2}},
{pulse_event{43550, 130, RED_AUX_1}},
{pulse_event{43680, 130, RED_AUX_2}},
{pulse_event{43810, 130, RED_AUX_1}},
{pulse_event{43940, 130, RED_AUX_2}},
{pulse_event{44070, 130, RED_AUX_1}},
{pulse_event{44200, 130, RED_AUX_2}},
{pulse_event{44330, 130, RED_AUX_1}},
{pulse_event{44460, 130, RED_AUX_2}},
{pulse_event{44590, 130, RED_AUX_1}},
{pulse_event{44720, 130, RED_AUX_2}},
{pulse_event{44850, 130, RED_AUX_1}},
{pulse_event{44980, 130, RED_AUX_2}},
{pulse_event{45110, 130, RED_AUX_1}},
{pulse_event{45240, 130, RED_AUX_2}},
{pulse_event{45370, 130, RED_AUX_1}},
{pulse_event{45500, 130, RED_AUX_2}},
{pulse_event{45630, 130, RED_AUX_1}},
{pulse_event{45760, 130, RED_AUX_2}},
{pulse_event{45890, 130, RED_AUX_1}},
{pulse_event{46020, 130, RED_AUX_2}},
{pulse_event{46150, 130, RED_AUX_1}},
{pulse_event{46280, 130, RED_AUX_2}},
{pulse_event{46410, 130, RED_AUX_1}},
{pulse_event{46540, 130, RED_AUX_2}},
{pulse_event{46670, 130, RED_AUX_1}},
{pulse_event{46800, 130, RED_AUX_2}},
{pulse_event{46930, 130, RED_AUX_1}},
{pulse_event{47060, 130, RED_AUX_2}},
{pulse_event{47190, 130, RED_AUX_1}},
{pulse_event{47320, 130, RED_AUX_2}},
{pulse_event{47450, 130, RED_AUX_1}},
{pulse_event{47580, 130, RED_AUX_2}},
{pulse_event{47710, 130, RED_AUX_1}},
{pulse_event{47840, 130, RED_AUX_2}},
{pulse_event{47970, 130, RED_AUX_1}},
{pulse_event{48100, 130, RED_AUX_2}},
{pulse_event{48230, 130, RED_AUX_1}},
{pulse_event{48360, 130, RED_AUX_2}},
{pulse_event{48490, 130, RED_AUX_1}},
{pulse_event{48620, 130, RED_AUX_2}},
{pulse_event{48750, 130, RED_AUX_1}},
{pulse_event{48880, 130, RED_AUX_2}},
{pulse_event{49010, 130, RED_AUX_1}},
{pulse_event{49140, 130, RED_AUX_2}},
{pulse_event{49270, 130, RED_AUX_1}},
{pulse_event{49400, 130, RED_AUX_2}},
{pulse_event{49530, 130, RED_AUX_1}},
{pulse_event{49660, 130, RED_AUX_2}},
{pulse_event{49790, 130, RED_AUX_1}},
{pulse_event{49920, 130, RED_AUX_2}},
{pulse_event{50050, 130, RED_AUX_1}},
{pulse_event{50180, 130, RED_AUX_2}},
{pulse_event{50310, 130, RED_AUX_1}},
{pulse_event{50440, 130, RED_AUX_2}},
{pulse_event{50570, 130, RED_AUX_1}},
{pulse_event{50700, 130, RED_AUX_2}},
{pulse_event{50830, 130, RED_AUX_1}},
{pulse_event{50960, 130, RED_AUX_2}},
{pulse_event{51090, 130, RED_AUX_1}},
{pulse_event{51220, 130, RED_AUX_2}},
{pulse_event{51350, 130, RED_AUX_1}},
{pulse_event{51480, 130, RED_AUX_2}},
{pulse_event{51610, 130, RED_AUX_1}},
{pulse_event{51740, 130, RED_AUX_2}},
{pulse_event{51870, 130, RED_AUX_1}},
{pulse_event{52000, 130, RED_AUX_2}},
{pulse_event{52130, 130, RED_AUX_1}},
{pulse_event{52260, 130, RED_AUX_2}},
{pulse_event{52390, 130, RED_AUX_1}},
{pulse_event{52520, 130, RED_AUX_2}},
{pulse_event{52650, 130, RED_AUX_1}},
{pulse_event{52780, 130, RED_AUX_2}},
{pulse_event{52910, 130, RED_AUX_1}},
{pulse_event{53040, 130, RED_AUX_2}},
{pulse_event{53170, 130, RED_AUX_1}},
{pulse_event{53300, 130, RED_AUX_2}},
{pulse_event{53430, 130, RED_AUX_1}},
{pulse_event{53560, 130, RED_AUX_2}},
{pulse_event{53690, 130, RED_AUX_1}},
{pulse_event{53820, 130, RED_AUX_2}},
{pulse_event{53950, 130, RED_AUX_1}},
{pulse_event{54080, 130, RED_AUX_2}},
{pulse_event{54210, 130, RED_AUX_1}},
{pulse_event{54340, 130, RED_AUX_2}},
{pulse_event{54470, 130, RED_AUX_1}},
{pulse_event{54600, 130, RED_AUX_2}},
{pulse_event{54730, 130, RED_AUX_1}},
{pulse_event{54860, 130, RED_AUX_2}},
{pulse_event{54990, 130, RED_AUX_1}},
{pulse_event{55120, 130, RED_AUX_2}},
{pulse_event{55250, 130, RED_AUX_1}},
{pulse_event{55380, 130, RED_AUX_2}},
{pulse_event{55510, 130, RED_AUX_1}},
{pulse_event{55640, 130, RED_AUX_2}},
{pulse_event{55770, 130, RED_AUX_1}},
{pulse_event{55900, 130, RED_AUX_2}},
{pulse_event{56030, 130, RED_AUX_1}},
{pulse_event{56160, 130, RED_AUX_2}},
{pulse_event{56290, 130, RED_AUX_1}},
{pulse_event{56420, 130, RED_AUX_2}},
{pulse_event{56550, 130, RED_AUX_1}},
{pulse_event{56680, 130, RED_AUX_2}},
{pulse_event{56810, 130, RED_AUX_1}},
{pulse_event{56940, 130, RED_AUX_2}},
{pulse_event{57070, 130, RED_AUX_1}},
{pulse_event{57200, 130, RED_AUX_2}},
{pulse_event{57330, 130, RED_AUX_1}},
{pulse_event{57460, 130, RED_AUX_2}},
{pulse_event{57590, 130, RED_AUX_1}},
{pulse_event{57720, 130, RED_AUX_2}},
{pulse_event{57850, 130, RED_AUX_1}},
{pulse_event{57980, 130, RED_AUX_2}},
{pulse_event{58110, 130, RED_AUX_1}},
{pulse_event{58240, 130, RED_AUX_2}},
{pulse_event{58370, 130, RED_AUX_1}},
{pulse_event{58500, 130, RED_AUX_2}},
{pulse_event{58630, 130, RED_AUX_1}},
{pulse_event{58760, 130, RED_AUX_2}},
{pulse_event{58890, 130, RED_AUX_1}},
{pulse_event{59020, 130, RED_AUX_2}},
{pulse_event{59150, 130, RED_AUX_1}},
{pulse_event{59280, 130, RED_AUX_2}},
{pulse_event{59410, 130, RED_AUX_1}},
{pulse_event{59540, 130, RED_AUX_2}},
{pulse_event{59670, 130, RED_AUX_1}},
{pulse_event{59800, 130, RED_AUX_2}},
{pulse_event{59930, 130, RED_AUX_1}},
{pulse_event{60060, 130, RED_AUX_2}},
{pulse_event{60190, 130, RED_AUX_1}},
{pulse_event{60320, 130, RED_AUX_2}},
{pulse_event{60450, 130, RED_AUX_1}},
{pulse_event{60580, 130, RED_AUX_2}},
{pulse_event{60710, 130, RED_AUX_1}},
{pulse_event{60840, 130, RED_AUX_2}},
{pulse_event{60970, 130, RED_AUX_1}},
{pulse_event{61100, 130, RED_AUX_2}},
{pulse_event{61230, 130, RED_AUX_1}},
{pulse_event{61360, 130, RED_AUX_2}},
{pulse_event{61490, 130, RED_AUX_1}},
{pulse_event{61620, 130, RED_AUX_2}},
{pulse_event{61750, 130, RED_AUX_1}},
{pulse_event{61880, 130, RED_AUX_2}},
{pulse_event{62010, 130, RED_AUX_1}},
{pulse_event{62140, 130, RED_AUX_2}},
{pulse_event{62270, 130, RED_AUX_1}},
{pulse_event{62400, 130, RED_AUX_2}},
{pulse_event{62530, 130, RED_AUX_1}},
{pulse_event{62660, 130, RED_AUX_2}},
{pulse_event{62790, 130, RED_AUX_1}},
{pulse_event{62920, 130, RED_AUX_2}},
{pulse_event{63050, 130, RED_AUX_1}},
{pulse_event{63180, 130, RED_AUX_2}},
{pulse_event{63310, 130, RED_AUX_1}},
{pulse_event{63440, 130, RED_AUX_2}},
{pulse_event{63570, 130, RED_AUX_1}},
{pulse_event{63700, 130, RED_AUX_2}},
{pulse_event{63830, 130, RED_AUX_1}},
{pulse_event{63960, 130, RED_AUX_2}},
{pulse_event{64090, 130, RED_AUX_1}},
{pulse_event{64220, 130, RED_AUX_2}},
{pulse_event{64350, 130, RED_AUX_1}},
{pulse_event{64480, 130, RED_AUX_2}},
{pulse_event{64610, 130, RED_AUX_1}},
{pulse_event{64740, 130, RED_AUX_2}},
{pulse_event{64870, 130, RED_AUX_1}},
{pulse_event{65000, 130, RED_AUX_2}},
{pulse_event{65130, 130, RED_AUX_1}},
{pulse_event{65260, 130, RED_AUX_2}},
{pulse_event{65390, 130, RED_AUX_1}},
{pulse_event{65520, 130, RED_AUX_2}},
{pulse_event{65650, 130, RED_AUX_1}},
{pulse_event{65780, 130, RED_AUX_2}},
{pulse_event{65910, 130, RED_AUX_1}},
{pulse_event{66040, 130, RED_AUX_2}},
{pulse_event{66170, 130, RED_AUX_1}},
{pulse_event{66300, 130, RED_AUX_2}},
{pulse_event{66430, 130, RED_AUX_1}},
{pulse_event{66560, 130, RED_AUX_2}},
{pulse_event{66690, 130, RED_AUX_1}},
{pulse_event{66820, 130, RED_AUX_2}},
{pulse_event{66950, 130, RED_AUX_1}},
{pulse_event{67080, 130, RED_AUX_2}},
{pulse_event{67210, 130, RED_AUX_1}},
{pulse_event{67340, 130, RED_AUX_2}},
{pulse_event{67470, 130, RED_AUX_1}},
{pulse_event{67600, 130, RED_AUX_2}},
{pulse_event{67730, 130, RED_AUX_1}},
{pulse_event{67860, 130, RED_AUX_2}},
{pulse_event{67990, 130, RED_AUX_1}},
{pulse_event{68120, 130, RED_AUX_2}},
{pulse_event{68250, 130, RED_AUX_1}},
{pulse_event{68380, 130, RED_AUX_2}},
{pulse_event{68510, 130, RED_AUX_1}},
{pulse_event{68640, 130, RED_AUX_2}},
{pulse_event{68770, 130, RED_AUX_1}},
{pulse_event{68900, 130, RED_AUX_2}},
{pulse_event{69030, 130, RED_AUX_1}},
{pulse_event{69160, 130, RED_AUX_2}},
{pulse_event{69290, 130, RED_AUX_1}},
{pulse_event{69420, 130, RED_AUX_2}},
{pulse_event{69550, 130, RED_AUX_1}},
{pulse_event{69680, 130, RED_AUX_2}},
{pulse_event{69810, 130, RED_AUX_1}},
{pulse_event{69940, 130, RED_AUX_2}},
{pulse_event{70070, 130, RED_AUX_1}},
{pulse_event{70200, 130, RED_AUX_2}},
{pulse_event{70330, 130, RED_AUX_1}},
{pulse_event{70460, 130, RED_AUX_2}},
{pulse_event{70590, 130, RED_AUX_1}},
{pulse_event{70720, 130, RED_AUX_2}},
{pulse_event{70850, 130, RED_AUX_1}},
{pulse_event{70980, 130, RED_AUX_2}},
{pulse_event{71110, 130, RED_AUX_1}},
{pulse_event{71240, 130, RED_AUX_2}},
{pulse_event{71370, 130, RED_AUX_1}},
{pulse_event{71500, 130, RED_AUX_2}},
{pulse_event{71630, 130, RED_AUX_1}},
{pulse_event{71760, 130, RED_AUX_2}},
{pulse_event{71890, 130, RED_AUX_1}},
{pulse_event{72020, 130, RED_AUX_2}},
{pulse_event{72150, 130, RED_AUX_1}},
{pulse_event{72280, 130, RED_AUX_2}},
{pulse_event{72410, 130, RED_AUX_1}},
{pulse_event{72540, 130, RED_AUX_2}},
{pulse_event{72670, 130, RED_AUX_1}},
{pulse_event{72800, 130, RED_AUX_2}},
{pulse_event{72930, 130, RED_AUX_1}},
{pulse_event{73060, 130, RED_AUX_2}},
{pulse_event{73190, 130, RED_AUX_1}},
{pulse_event{73320, 130, RED_AUX_2}},
{pulse_event{73450, 130, RED_AUX_1}},
{pulse_event{73580, 130, RED_AUX_2}},
{pulse_event{73710, 130, RED_AUX_1}},
{pulse_event{73840, 130, RED_AUX_2}},
{pulse_event{73970, 130, RED_AUX_1}},
{pulse_event{74100, 130, RED_AUX_2}},
{pulse_event{74230, 130, RED_AUX_1}},
{pulse_event{74360, 130, RED_AUX_2}},
{pulse_event{74490, 130, RED_AUX_1}},
{pulse_event{74620, 130, RED_AUX_2}},
{pulse_event{74750, 130, RED_AUX_1}},
{pulse_event{74880, 130, RED_AUX_2}},
{pulse_event{75010, 130, RED_AUX_1}},
{pulse_event{75140, 130, RED_AUX_2}},
{pulse_event{75270, 130, RED_AUX_1}},
{pulse_event{75400, 130, RED_AUX_2}},
{pulse_event{75530, 130, RED_AUX_1}},
{pulse_event{75660, 130, RED_AUX_2}},
{pulse_event{75790, 130, RED_AUX_1}},
{pulse_event{75920, 130, RED_AUX_2}},
{pulse_event{76050, 130, RED_AUX_1}},
{pulse_event{76180, 130, RED_AUX_2}},
{pulse_event{76310, 130, RED_AUX_1}},
{pulse_event{76440, 130, RED_AUX_2}},
{pulse_event{76570, 130, RED_AUX_1}},
{pulse_event{76700, 130, RED_AUX_2}},
{pulse_event{76830, 130, RED_AUX_1}},
{pulse_event{76960, 130, RED_AUX_2}},
{pulse_event{77090, 130, RED_AUX_1}},
{pulse_event{77220, 130, RED_AUX_2}},
{pulse_event{77350, 130, RED_AUX_1}},
{pulse_event{77480, 130, RED_AUX_2}},
{pulse_event{77610, 130, RED_AUX_1}},
{pulse_event{77740, 130, RED_AUX_2}},
{pulse_event{77870, 130, RED_AUX_1}},
{pulse_event{78000, 130, RED_AUX_2}},
{pulse_event{78130, 130, RED_AUX_1}},
{pulse_event{78260, 130, RED_AUX_2}},
{pulse_event{78390, 130, RED_AUX_1}},
{pulse_event{78520, 130, RED_AUX_2}},
{pulse_event{78650, 130, RED_AUX_1}},
{pulse_event{78780, 130, RED_AUX_2}},
{pulse_event{78910, 130, RED_AUX_1}},
{pulse_event{79040, 130, RED_AUX_2}},
{pulse_event{79170, 130, RED_AUX_1}},
{pulse_event{79300, 130, RED_AUX_2}},
{pulse_event{79430, 130, RED_AUX_1}},
{pulse_event{79560, 130, RED_AUX_2}},
{pulse_event{79690, 130, RED_AUX_1}},
{pulse_event{79820, 130, RED_AUX_2}},
{pulse_event{79950, 130, RED_AUX_1}},
{pulse_event{80080, 130, RED_AUX_2}},
{pulse_event{80210, 130, RED_AUX_1}},
{pulse_event{80340, 130, RED_AUX_2}},
{pulse_event{80470, 130, RED_AUX_1}},
{pulse_event{80600, 130, RED_AUX_2}},
{pulse_event{80730, 130, RED_AUX_1}},
{pulse_event{80860, 130, RED_AUX_2}},
{pulse_event{80990, 130, RED_AUX_1}},
{pulse_event{81120, 130, RED_AUX_2}},
{pulse_event{81250, 130, RED_AUX_1}},
{pulse_event{81380, 130, RED_AUX_2}},
{pulse_event{81510, 130, RED_AUX_1}},
{pulse_event{81640, 130, RED_AUX_2}},
{pulse_event{81770, 130, RED_AUX_1}},
{pulse_event{81900, 130, RED_AUX_2}},
{pulse_event{82030, 130, RED_AUX_1}},
{pulse_event{82160, 130, RED_AUX_2}},
{pulse_event{82290, 130, RED_AUX_1}},
{pulse_event{82420, 130, RED_AUX_2}},
{pulse_event{82550, 130, RED_AUX_1}},
{pulse_event{82680, 130, RED_AUX_2}},
{pulse_event{82810, 130, RED_AUX_1}},
{pulse_event{82940, 130, RED_AUX_2}},
{pulse_event{83070, 130, RED_AUX_1}},
{pulse_event{83200, 130, RED_AUX_2}},
{pulse_event{83330, 130, RED_AUX_1}},
{pulse_event{83460, 130, RED_AUX_2}},
{pulse_event{83590, 130, RED_AUX_1}},
{pulse_event{83720, 130, RED_AUX_2}},
{pulse_event{83850, 130, RED_AUX_1}},
{pulse_event{83980, 130, RED_AUX_2}},
{pulse_event{84110, 130, RED_AUX_1}},
{pulse_event{84240, 130, RED_AUX_2}},
{pulse_event{84370, 130, RED_AUX_1}},
{pulse_event{84500, 130, RED_AUX_2}},
{pulse_event{84630, 130, RED_AUX_1}},
{pulse_event{84760, 130, RED_AUX_2}},
{pulse_event{84890, 130, RED_AUX_1}},
{pulse_event{85020, 130, RED_AUX_2}},
{pulse_event{85150, 130, RED_AUX_1}},
{pulse_event{85280, 130, RED_AUX_2}},
{pulse_event{85410, 130, RED_AUX_1}},
{pulse_event{85540, 130, RED_AUX_2}},
{pulse_event{85670, 130, RED_AUX_1}},
{pulse_event{85800, 130, RED_AUX_2}},
{pulse_event{85930, 130, RED_AUX_1}},
{pulse_event{86060, 130, RED_AUX_2}},
{pulse_event{86190, 130, RED_AUX_1}},
{pulse_event{86320, 130, RED_AUX_2}},
{pulse_event{86450, 130, RED_AUX_1}},
{pulse_event{86580, 130, RED_AUX_2}},
{pulse_event{86710, 130, RED_AUX_1}},
{pulse_event{86840, 130, RED_AUX_2}},
{pulse_event{86970, 130, RED_AUX_1}},
{pulse_event{87100, 130, RED_AUX_2}},
{pulse_event{87230, 130, RED_AUX_1}},
{pulse_event{87360, 130, RED_AUX_2}},
{pulse_event{87490, 130, RED_AUX_1}},
{pulse_event{87620, 130, RED_AUX_2}},
{pulse_event{87750, 130, RED_AUX_1}},
{pulse_event{87880, 130, RED_AUX_2}},
{pulse_event{88010, 130, RED_AUX_1}},
{pulse_event{88140, 130, RED_AUX_2}},
{pulse_event{88270, 130, RED_AUX_1}},
{pulse_event{88400, 130, RED_AUX_2}},
{pulse_event{88530, 130, RED_AUX_1}},
{pulse_event{88660, 130, RED_AUX_2}},
{pulse_event{88790, 130, RED_AUX_1}},
{pulse_event{88920, 130, RED_AUX_2}},
{pulse_event{89050, 130, RED_AUX_1}},
{pulse_event{89180, 130, RED_AUX_2}},
{pulse_event{89310, 130, RED_AUX_1}},
{pulse_event{89440, 130, RED_AUX_2}},
{pulse_event{89570, 130, RED_AUX_1}},
{pulse_event{89700, 130, RED_AUX_2}},
{pulse_event{89830, 130, RED_AUX_1}},
{pulse_event{89960, 130, RED_AUX_2}},
{pulse_event{90090, 130, RED_AUX_1}},
{pulse_event{90220, 130, RED_AUX_2}},
{pulse_event{90350, 130, RED_AUX_1}},
{pulse_event{90480, 130, RED_AUX_2}},
{pulse_event{90610, 130, RED_AUX_1}},
{pulse_event{90740, 130, RED_AUX_2}},
{pulse_event{90870, 130, RED_AUX_1}},
{pulse_event{91000, 130, RED_AUX_2}},
{pulse_event{91130, 130, RED_AUX_1}},
{pulse_event{91260, 130, RED_AUX_2}},
{pulse_event{91390, 130, RED_AUX_1}},
{pulse_event{91520, 130, RED_AUX_2}},
{pulse_event{91650, 130, RED_AUX_1}},
{pulse_event{91780, 130, RED_AUX_2}},
{pulse_event{91910, 130, RED_AUX_1}},
{pulse_event{92040, 130, RED_AUX_2}},
{pulse_event{92170, 130, RED_AUX_1}},
{pulse_event{92300, 130, RED_AUX_2}},
{pulse_event{92430, 130, RED_AUX_1}},
{pulse_event{92560, 130, RED_AUX_2}},
{pulse_event{92690, 130, RED_AUX_1}},
{pulse_event{92820, 130, RED_AUX_2}},
{pulse_event{92950, 130, RED_AUX_1}},
{pulse_event{93080, 130, RED_AUX_2}},
{pulse_event{93210, 130, RED_AUX_1}},
{pulse_event{93340, 130, RED_AUX_2}},
{pulse_event{93470, 130, RED_AUX_1}},
{pulse_event{93600, 130, RED_AUX_2}},
{pulse_event{93730, 130, RED_AUX_1}},
{pulse_event{93860, 130, RED_AUX_2}},
{pulse_event{93990, 130, RED_AUX_1}},
{pulse_event{94120, 130, RED_AUX_2}},
{pulse_event{94250, 130, RED_AUX_1}},
{pulse_event{94380, 130, RED_AUX_2}},
{pulse_event{94510, 130, RED_AUX_1}},
{pulse_event{94640, 130, RED_AUX_2}},
{pulse_event{94770, 130, RED_AUX_1}},
{pulse_event{94900, 130, RED_AUX_2}},
{pulse_event{95030, 130, RED_AUX_1}},
{pulse_event{95160, 130, RED_AUX_2}},
{pulse_event{95290, 130, RED_AUX_1}},
{pulse_event{95420, 130, RED_AUX_2}},
{pulse_event{95550, 130, RED_AUX_1}},
{pulse_event{95680, 130, RED_AUX_2}},
{pulse_event{95810, 130, RED_AUX_1}},
{pulse_event{95940, 130, RED_AUX_2}},
{pulse_event{96070, 130, RED_AUX_1}},
{pulse_event{96200, 130, RED_AUX_2}},
{pulse_event{96330, 130, RED_AUX_1}},
{pulse_event{96460, 130, RED_AUX_2}},
{pulse_event{96590, 130, RED_AUX_1}},
{pulse_event{96720, 130, RED_AUX_2}},
{pulse_event{96850, 130, RED_AUX_1}},
{pulse_event{96980, 130, RED_AUX_2}},
{pulse_event{97110, 130, RED_AUX_1}},
{pulse_event{97240, 130, RED_AUX_2}},
{pulse_event{97370, 130, RED_AUX_1}},
{pulse_event{97500, 130, RED_AUX_2}},
{pulse_event{97630, 130, RED_AUX_1}},
{pulse_event{97760, 130, RED_AUX_2}},
{pulse_event{97890, 130, RED_AUX_1}},
{pulse_event{98020, 130, RED_AUX_2}},
{pulse_event{98150, 130, RED_AUX_1}},
{pulse_event{98280, 130, RED_AUX_2}},
{pulse_event{98410, 130, RED_AUX_1}},
{pulse_event{98540, 130, RED_AUX_2}},
{pulse_event{98670, 130, RED_AUX_1}},
{pulse_event{98800, 130, RED_AUX_2}},
{pulse_event{98930, 130, RED_AUX_1}},
{pulse_event{99060, 130, RED_AUX_2}},
{pulse_event{99190, 130, RED_AUX_1}},
{pulse_event{99320, 130, RED_AUX_2}},
{pulse_event{99450, 130, RED_AUX_1}},
{pulse_event{99580, 130, RED_AUX_2}},
{pulse_event{99710, 130, RED_AUX_1}},
{pulse_event{99840, 130, RED_AUX_2}},
{pulse_event{99970, 130, RED_AUX_1}},
{pulse_event{100100, 130, RED_AUX_2}},
{pulse_event{100230, 130, RED_AUX_1}},
{pulse_event{100360, 130, RED_AUX_2}},
{pulse_event{100490, 130, RED_AUX_1}},
{pulse_event{100620, 130, RED_AUX_2}},
{pulse_event{100750, 130, RED_AUX_1}},
{pulse_event{100880, 130, RED_AUX_2}},
{pulse_event{101010, 130, RED_AUX_1}},
{pulse_event{101140, 130, RED_AUX_2}},
{pulse_event{101270, 130, RED_AUX_1}},
{pulse_event{101400, 130, RED_AUX_2}},
{pulse_event{101530, 130, RED_AUX_1}},
{pulse_event{101660, 130, RED_AUX_2}},
{pulse_event{101790, 130, RED_AUX_1}},
{pulse_event{101920, 130, RED_AUX_2}},
{pulse_event{102050, 130, RED_AUX_1}},
{pulse_event{102180, 130, RED_AUX_2}},
{pulse_event{102310, 130, RED_AUX_1}},
{pulse_event{102440, 130, RED_AUX_2}},
{pulse_event{102570, 130, RED_AUX_1}},
{pulse_event{102700, 130, RED_AUX_2}},
{pulse_event{102830, 130, RED_AUX_1}},
{pulse_event{102960, 130, RED_AUX_2}},
{pulse_event{103090, 130, RED_AUX_1}},
{pulse_event{103220, 130, RED_AUX_2}},
{pulse_event{103350, 130, RED_AUX_1}},
{pulse_event{103480, 130, RED_AUX_2}},
{pulse_event{103610, 130, RED_AUX_1}},
{pulse_event{103740, 130, RED_AUX_2}},
{pulse_event{103870, 130, RED_AUX_1}},
{pulse_event{104000, 130, RED_AUX_2}},
{pulse_event{104130, 130, RED_AUX_1}},
{pulse_event{104260, 130, RED_AUX_2}},
{pulse_event{104390, 130, RED_AUX_1}},
{pulse_event{104520, 130, RED_AUX_2}},
{pulse_event{104650, 130, RED_AUX_1}},
{pulse_event{104780, 130, RED_AUX_2}},
{pulse_event{104910, 130, RED_AUX_1}},
{pulse_event{105040, 130, RED_AUX_2}},
{pulse_event{105170, 130, RED_AUX_1}},
{pulse_event{105300, 130, RED_AUX_2}},
{pulse_event{105430, 130, RED_AUX_1}},
{pulse_event{105560, 130, RED_AUX_2}},
{pulse_event{105690, 130, RED_AUX_1}},
{pulse_event{105820, 130, RED_AUX_2}},
{pulse_event{105950, 130, RED_AUX_1}},
{pulse_event{106080, 130, RED_AUX_2}},
{pulse_event{106210, 130, RED_AUX_1}},
{pulse_event{106340, 130, RED_AUX_2}},
{pulse_event{106470, 130, RED_AUX_1}},
{pulse_event{106600, 130, RED_AUX_2}},
{pulse_event{106730, 130, RED_AUX_1}},
{pulse_event{106860, 130, RED_AUX_2}},
{pulse_event{106990, 130, RED_AUX_1}},
{pulse_event{107120, 130, RED_AUX_2}},
{pulse_event{107250, 130, RED_AUX_1}},
{pulse_event{107380, 130, RED_AUX_2}},
{pulse_event{107510, 130, RED_AUX_1}},
{pulse_event{107640, 130, RED_AUX_2}},
{pulse_event{107770, 130, RED_AUX_1}},
{pulse_event{107900, 130, RED_AUX_2}},
{pulse_event{108030, 130, RED_AUX_1}},
{pulse_event{108160, 130, RED_AUX_2}},
{pulse_event{108290, 130, RED_AUX_1}},
{pulse_event{108420, 130, RED_AUX_2}},
{pulse_event{108550, 130, RED_AUX_1}},
{pulse_event{108680, 130, RED_AUX_2}},
{pulse_event{108810, 130, RED_AUX_1}},
{pulse_event{108940, 130, RED_AUX_2}},
{pulse_event{109070, 130, RED_AUX_1}},
{pulse_event{109200, 130, RED_AUX_2}},
{pulse_event{109330, 130, RED_AUX_1}},
{pulse_event{109460, 130, RED_AUX_2}},
{pulse_event{109590, 130, RED_AUX_1}},
{pulse_event{109720, 130, RED_AUX_2}},
{pulse_event{109850, 130, RED_AUX_1}},
{pulse_event{109980, 130, RED_AUX_2}},
{pulse_event{110110, 130, RED_AUX_1}},
{pulse_event{110240, 130, RED_AUX_2}},
{pulse_event{110370, 130, RED_AUX_1}},
{pulse_event{110500, 130, RED_AUX_2}},
{pulse_event{110630, 130, RED_AUX_1}},
{pulse_event{110760, 130, RED_AUX_2}},
{pulse_event{110890, 130, RED_AUX_1}},
{pulse_event{111020, 130, RED_AUX_2}},
{pulse_event{111150, 130, RED_AUX_1}},
{pulse_event{111280, 130, RED_AUX_2}},
{pulse_event{111410, 130, RED_AUX_1}},
{pulse_event{111540, 130, RED_AUX_2}},
{pulse_event{111670, 130, RED_AUX_1}},
{pulse_event{111800, 130, RED_AUX_2}},
{pulse_event{111930, 130, RED_AUX_1}},
{pulse_event{112060, 130, RED_AUX_2}},
{pulse_event{112190, 130, RED_AUX_1}},
{pulse_event{112320, 130, RED_AUX_2}},
{pulse_event{112450, 130, RED_AUX_1}},
{pulse_event{112580, 130, RED_AUX_2}},
{pulse_event{112710, 130, RED_AUX_1}},
{pulse_event{112840, 130, RED_AUX_2}},
{pulse_event{112970, 130, RED_AUX_1}},
{pulse_event{113100, 130, RED_AUX_2}},
{pulse_event{113230, 130, RED_AUX_1}},
{pulse_event{113360, 130, RED_AUX_2}},
{pulse_event{113490, 130, RED_AUX_1}},
{pulse_event{113620, 130, RED_AUX_2}},
{pulse_event{113750, 130, RED_AUX_1}},
{pulse_event{113880, 130, RED_AUX_2}},
{pulse_event{114010, 130, RED_AUX_1}},
{pulse_event{114140, 130, RED_AUX_2}},
{pulse_event{114270, 130, RED_AUX_1}},
{pulse_event{114400, 130, RED_AUX_2}},
{pulse_event{114530, 130, RED_AUX_1}},
{pulse_event{114660, 130, RED_AUX_2}},
{pulse_event{114790, 130, RED_AUX_1}},
{pulse_event{114920, 130, RED_AUX_2}},
{pulse_event{115050, 130, RED_AUX_1}},
{pulse_event{115180, 130, RED_AUX_2}},
{pulse_event{115310, 130, RED_AUX_1}},
{pulse_event{115440, 130, RED_AUX_2}},
{pulse_event{115570, 130, RED_AUX_1}},
{pulse_event{115700, 130, RED_AUX_2}},
{pulse_event{115830, 130, RED_AUX_1}},
{pulse_event{115960, 130, RED_AUX_2}},
{pulse_event{116090, 130, RED_AUX_1}},
{pulse_event{116220, 130, RED_AUX_2}},
{pulse_event{116350, 130, RED_AUX_1}},
{pulse_event{116480, 130, RED_AUX_2}},
{pulse_event{116610, 130, RED_AUX_1}},
{pulse_event{116740, 130, RED_AUX_2}},
{pulse_event{116870, 130, RED_AUX_1}},
{pulse_event{117000, 130, RED_AUX_2}},
{pulse_event{117130, 130, RED_AUX_1}},
{pulse_event{117260, 130, RED_AUX_2}},
{pulse_event{117390, 130, RED_AUX_1}},
{pulse_event{117520, 130, RED_AUX_2}},
{pulse_event{117650, 130, RED_AUX_1}},
{pulse_event{117780, 130, RED_AUX_2}},
{pulse_event{117910, 130, RED_AUX_1}},
{pulse_event{118040, 130, RED_AUX_2}},
{pulse_event{118170, 130, RED_AUX_1}},
{pulse_event{118300, 130, RED_AUX_2}},
{pulse_event{118430, 130, RED_AUX_1}},
{pulse_event{118560, 130, RED_AUX_2}},
{pulse_event{118690, 130, RED_AUX_1}},
{pulse_event{118820, 130, RED_AUX_2}},
{pulse_event{118950, 130, RED_AUX_1}},
{pulse_event{119080, 130, RED_AUX_2}},
{pulse_event{119210, 130, RED_AUX_1}},
{pulse_event{119340, 130, RED_AUX_2}},
{pulse_event{119470, 130, RED_AUX_1}},
{pulse_event{119600, 130, RED_AUX_2}},
{pulse_event{119730, 130, RED_AUX_1}},
{pulse_event{119860, 130, RED_AUX_2}},
{pulse_event{119990, 130, RED_AUX_1}},
{pulse_event{7000, 4000, YELLOW_AUX, 10}},
{pulse_event{11600, 2900, YELLOW_AUX, 10}},
{pulse_event{15700, 2400, YELLOW_AUX, 10}},
{pulse_event{19000, 2400, YELLOW_AUX, 10}},
{pulse_event{22500, 2300, YELLOW_AUX, 10}},

{pulse_event{26200, 2300, YELLOW_AUX, 10}},

{pulse_event{29000, 2300, YELLOW_AUX, 10}},
{pulse_event{33500, 2300, YELLOW_AUX, 10}},
{pulse_event{37300, 2300, YELLOW_AUX, 10}},
{pulse_event{40200, 2300, YELLOW_AUX, 10}},
{pulse_event{44300, 2300, YELLOW_AUX, 10}},
{pulse_event{47500, 2300, YELLOW_AUX, 10}},
{rgb_event{0, 30000, 235, 207, 52}},
//{rgb_event{29200, 400, 235, 207, 52}},

};

#define SET_PIN_COLOR(pin, red, green, blue) (\
((pin & 0xFF) << 24) | ((red & 0xFF) << 16) | ((green & 0xFF) << 8) | (blue & 0xFF))
#define SET_PIN_VALUE(pin, value) SET_PIN_COLOR(pin, value, 0, 0)
#define GET_PIN(data)      ((data >> 24) & 0xFF)
#define GET_RED(data)      ((data >> 16) & 0xFF)
#define GET_VALUE GET_RED
#define GET_GREEN(data)    ((data >> 8) & 0xFF)
#define GET_BLUE(data)     (data & 0xFF)

void add_event(const std::uint32_t data, const std::uint32_t abs_time) {
  std::uint32_t accumulatedTime = 0;
  auto it = queue.begin();

  for (; it != queue.end(); ++it) {
    if (accumulatedTime + it->delay >= abs_time) {
      break;
    }
    accumulatedTime += it->delay;
  }

  const std::uint16_t new_delta = abs_time - accumulatedTime;

  it = queue.insert(it, {new_delta, data});

  if ((it + 1) != queue.end()) {
    (it + 1)->delay -= new_delta;
  }
}

void start_sequence() {
  // iterate over queue with an iterator
  for (
  auto it = queue.begin();
  it != queue.end();
  ++it
  ) {
    if (digitalRead(GUITAR)) {
      for (const auto& pin : pin_init) {
        if (pin.second== OUTPUT) {
          analogWrite(pin.first, 0);
        }
      }
      break;
    }
    const auto pin = GET_PIN(it->data);
    if (pin == PIN_ALL_RGB) {
      const std::uint8_t red = GET_RED(it->data);
      const std::uint8_t green = GET_GREEN(it->data);
      const std::uint8_t blue = GET_BLUE(it->data);
      // it's horrible but it's fast.
      analogWrite(RED_1, red);
      analogWrite(GREEN_1, green);
      analogWrite(BLUE_1, blue);
      analogWrite(RED_2, red);
      analogWrite(GREEN_2, green);
      analogWrite(BLUE_2, blue);
      analogWrite(RED_3, red);
      analogWrite(GREEN_3, green);
      analogWrite(BLUE_3, blue);
      analogWrite(RED_4, red);
      analogWrite(GREEN_4, green);
      analogWrite(BLUE_4, blue);
    }
    else {
      analogWrite(pin, GET_VALUE(it->data));
    }
    // check if next
    if (it + 1 != queue.end()) {
      delay((it+1)->delay);
    }
  }
}

void setup() {
  // put your setup code here, to run once:
  Serial.begin(115200);
  pinMode(2, OUTPUT);
  digitalWrite(2, LOW);
  // Initialize the pins
  for (const auto& [pin_number, pin_mode] : pin_init) {
    pinMode(pin_number, pin_mode);
  }

  for (const auto& event : event_inits) {
    switch (event.type) {
      case 0:
        for (int i = 0; i <= event.v.pulse.duration; i+= (event.v.pulse.duration / event.v.pulse.int_res)) {
          const double mult = static_cast<double>(i) / event.v.pulse.duration;
          add_event(SET_PIN_VALUE(event.v.pulse.pin, static_cast<uint8_t>(mult * 255)), event.v.pulse.time + i);
        }
        add_event(SET_PIN_VALUE(event.v.pulse.pin, 0), event.v.pulse.time + event.v.pulse.duration + 1);
        break;
      case 1:
        for (int i = 0; i <= event.v.rgb.duration; i+= (event.v.rgb.duration / resolution)) {
          const double mult = static_cast<double>(i) / event.v.rgb.duration;
          add_event(SET_PIN_COLOR(PIN_ALL_RGB, static_cast<uint8_t>(mult * event.v.rgb.red), static_cast<uint8_t>(mult * event.v.rgb.green), static_cast<uint8_t>(mult * event.v.rgb.blue)), event.v.rgb.time + i);
        }
      add_event(SET_PIN_COLOR(PIN_ALL_RGB, 0, 0, 0), event.v.rgb.time + event.v.rgb.duration + 1);
        break;
      default:break;
    }
  }
  digitalWrite(2, HIGH);
}

void loop() {
  // put your main code here, to run repeatedly:
  delay(10);
  if (digitalRead(START)) {
    start_sequence();
  }
  if (digitalRead(GUITAR)) {
    Serial.println(
    "CANCEL!"
    );
  }
}